<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nationalparks Java App :: OpenShift Starter Guides</title>
    <link rel="canonical" href="http://redhat-scholars.github.io/openshift-starter-guides/rhs-openshift-starter-guides/4.8/nationalparks-java.html">
    <link rel="prev" href="parksmap-rsh.html">
    <link rel="next" href="nationalparks-java-databases.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () { 
      const urlParams = new URLSearchParams(window.location.search);
      const clusterName = urlParams.get('CLUSTER_SUBDOMAIN');
      const projectName = urlParams.get('PROJECT');
      if (clusterName) {
        showCluster( clusterName );
      }
      else {
        showClusterForm();
      }

      if (projectName) {
        showProject( projectName );
      } else {
        showProjectForm();
      }
    } );


    function sliceCluster(clusterName){
      if (clusterName.length > 70) {
          return "..." + clusterName.slice(35);
      } else {
          return clusterName;
      }
    }

    function showCluster( clusterName ) {
      document.getElementById('navbar-form-empty').style.display = "none";
      document.getElementById('navbar-form-filled').style.display = "flex";
      document.getElementById('cluster_subdomain').textContent = sliceCluster(clusterName);
      document.getElementById('clusterfield2').value = clusterName;

    }

    function showClusterForm( clusterName ) {
      document.getElementById('navbar-form-empty').style.display = "flex";
      document.getElementById('navbar-form-filled').style.display = "none";
    }

    function gowithcluster() {
      elClusterInput = document.getElementById('clusterfield');
      elProjectInput = document.getElementById('projectfield2');

      window.location.search = ('&CLUSTER_SUBDOMAIN=' + elClusterInput.value + '&PROJECT=' + elProjectInput.value);
    }

    function showProject( projectName ) {
      document.getElementById('navbar-form-project-empty').style.display = "none";
      document.getElementById('navbar-form-project-filled').style.display = "flex";
      document.getElementById('project').textContent = projectName;
      document.getElementById('projectfield2').value = projectName;
    }

    function showProjectForm( projectName ) {
      document.getElementById('navbar-form-project-empty').style.display = "flex";
      document.getElementById('navbar-form-project-filled').style.display = "none";
    }

    function gowithproject() {
      elProjectInput = document.getElementById('projectfield');
      elClusterInput = document.getElementById('clusterfield2');
      window.location.search = ('&CLUSTER_SUBDOMAIN=' + elClusterInput.value + '&PROJECT=' + elProjectInput.value);
    }

  </script>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="http://redhat-scholars.github.io/openshift-starter-guides">OpenShift Starter Guides</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item" id="navbar-form-empty">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i style="color: orange;"
              class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>

          <form action="javascript:void(0);" onsubmit="gowithcluster();">
            <input size="40" id="clusterfield" type="text" placeholder="Enter Cluster Subdomain">
            <input type="hidden" id="projectfield2" name="projectfield2" value="">
          </form>
        </div>

        <div class="navbar-item" id="navbar-form-filled" style="display: none;">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
          <span class="navbar-text" id="cluster_subdomain"></span>
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
        </div>

         <div class="navbar-item" id="navbar-form-project-empty">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i style="color: orange;"
              class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>

          <form action="javascript:void(0);" onsubmit="gowithproject();">
            <input size="40" id="projectfield" type="text" placeholder="Enter Project Name">
            <input type="hidden" id="clusterfield2" name="clusterfield2" value="">
          </form>
        </div>

        <div class="navbar-item" id="navbar-form-project-filled" style="display: none;">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
          <span class="navbar-text" id="project"></span>
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
        </div>

        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-scholars.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="rhs-openshift-starter-guides" data-version="4.8">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">OpenShift Starter Guides</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-workshop-summary.html">实验总览</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="prerequisites.html">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-environment.html">OpenShift 架构</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-explore.html">配置实验环境&amp;探索 OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-explore.html#the_web_console">配置实验环境&amp;Web控制台</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-explore.html#command_line_interface">Command Line Interface 命令行控制台</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="common-explore.html#download_openshift_cli">Download OpenShift CLI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-explore.html#connect_to_the_cluster_with_cli">从 CLI 连接到 OpenShift 实验环境</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="common-explore.html#working_with_proxies">Working with proxies</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="projects.html">Projects项目</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="projects.html#create_your_first_project">创建您的第一个项目</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-parksmap-architecture.html">示例程序 Parksmap 架构</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="parksmap-container-image.html">部署示例程序 Parksmap </a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-container-image.html#deploy_your_first_image">练习: 部署您的第一个镜像</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-container-image.html#containers_and_pods">背景：容器和 Pod （Containers and Pods）</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-container-image.html#examining_the_pod">练习: 查看POD信息</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-container-image.html#customizing_image_lifecycle_behavior">背景: 自定义镜像生命周期行为</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-container-image.html#services">背景: 服务 Services</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="parksmap-scaling.html">Scaling Apps缩放应用程序</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-scaling.html#deployments_and_replicasets">背景: 部署 Deployments 和 复制集 ReplicaSets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-scaling.html#exploring_deployment_related_objects">练习：探索与部署相关的对象</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-scaling.html#scaling_the_application">练习：扩展应用程序</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-scaling.html#application_self_healing">应用程序“自愈 Self Healing"</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-scaling.html#scale_down">app缩小副本</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="parksmap-routes.html">Routes （路由）</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-routes.html#routes">背景：Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-routes.html#creating_a_route">练习：创建路由</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="parksmap-logging.html">日志</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-logging.html#container_logs">背景：容器日志</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-logging.html#examining_logs">练习：探索日志</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="parksmap-permissions.html">权限</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-permissions.html#grant_serviceaccount_view_permissions">练习：授予服务帐户查看权限</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-permissions.html#redeploy_application">练习：重新部署应用程序</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="parksmap-rsh.html">连接到容器</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-rsh.html#remote_shell_session_to_container_using_cli">练习：使用 CLI 与容器进行远程 Shell 会话</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-rsh.html#execute_command_in_container">练习：使用 Web 控制台与容器进行远程 Shell 会话</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-rsh.html#remote_shell_session_to_container_using_webconsole">练习：在容器中执行命令</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java.html">Nationalparks Java 程序</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#source_to_image">背景: 代码到镜像 Source-to-Image (S2I)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#creating_java_application">练习：创建  Java 应用程序</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#add_to_project">添加到项目</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#using_application_code_on_git_server">在 Git 服务器上使用应用程序代码</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#build_code_on_openshift">在 OpenShift 上构建代码</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java-databases.html">连接到数据库</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#storage">背景：存储Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#templates">背景：模板 Templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#create_mongodb_template">练习：创建 MongoDB 模板</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#deploy_mongodb">练习：部署 MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#exploring_openshift_magic">练习: Exploring OpenShift Magic</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#data_data_everywhere">练习: Data, Data, Everywhere</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#working_with_labels">练习：使用标签</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-application-health.html">应用健康检查</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-application-health.html#add_health_checks">练习：添加健康检查</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java-codechanges-github.html">Webhooks with OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github.html#prerequisite_github_account">Prerequisite: GitHub Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github.html#webhooks">Webhooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github.html#webhooks_with_openshift">Webhooks with OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github.html#configuring_github_webhooks">Exercise: Configuring GitHub Web Hooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github.html#using_github_webhooks">Exercise: Using GitHub Web Hooks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java-codechanges-github-actions.html">GitHub Actions with OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github-actions.html#disable_github_webhook">Disable GitHub Webhook</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github-actions.html#disable_openshift_triggers">Disable OpenShift Triggers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github-actions.html#configure_github_action">Configure GitHub Action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github-actions.html#add_github_action">Add GitHub Action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github-actions.html#enable_openshift_triggers">Enable OpenShift Triggers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java-pipeline.html">Continuous Integration and Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline.html#install_openshift_pipelines_from_operatorhub">Install OpenShift Pipelines from OperatorHub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline.html#understanding_tekton">Understanding Tekton</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline.html#create_your_pipeline">Create Your Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline.html#run_the_pipeline">Run the Pipeline</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java-pipeline-codechanges-github.html">Webhooks with Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline-codechanges-github.html#prerequisite_github_account">Prerequisite: GitHub Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline-codechanges-github.html#webhooks">Web Hooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline-codechanges-github.html#adding_triggers_to_your_pipeline">Adding Triggers to your Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline-codechanges-github.html#configuring_github_webhooks">Exercise: Configuring GitHub Web Hooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline-codechanges-github.html#using_github_webhooks">Exercise: Using GitHub Web Hooks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="mlbparks-templates.html">MLBParks App</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-templates.html#instantiate_template">Exercise: Instantiate a Template</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="mlbparks-binary-build.html">Binary Builds</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-binary-build.html#moving_on_from_s2i">Moving on From S2I</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-binary-build.html#fast_iterative_code_change_using_binary_deploy">Fast Iterative Code Change Using Binary Deploy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="mlbparks-binary-build.html#using_binary_deployment">Exercise: Using Binary Deployment</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mlbparks-binary-build.html#clone_source">Clone source</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mlbparks-binary-build.html#setup_the_build_of_the_war_file">Setup the Build of the WAR file</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mlbparks-binary-build.html#clone_change">Clone change</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mlbparks-binary-build.html#doing_the_binary_build">Doing the Binary Build</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="mlbparks-debugging.html">Debugging Apps</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-debugging.html#port_forwading_and_debugging">Background: Port Forwarding and Debugging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-debugging.html#enabling_debugging_in_eap_on_openshift">Exercise: Enabling Debugging in EAP on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-debugging.html#port-forwarding_from_svc_to_our_local_machine">Exercise: Port-Forwarding from a Service to our local machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-debugging.html#setting_up_remote_debugging">Attaching a Remote Debugger</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-debugging.html#port-forwarding_from_pod_to_our_local_machine">Exercise: Port-Forwarding from the pod to our local machine</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-further-resources.html">Further Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-workshop-links.html">Workshop Links</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#openshift_cluster_url">OpenShift Cluster URL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#workshop_guides">Workshop Guides</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#web_terminal">Web terminal</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#git_server">Git Server</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenShift Starter Guides</span>
    <span class="version">4.8</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">OpenShift Starter Guides</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">4.8</a>
        </li>
        <li class="version">
          <a href="../4.7/index.html">4.7</a>
        </li>
        <li class="version">
          <a href="../4.6/index.html">4.6</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OpenShift Starter Guides</a></li>
    <li><a href="nationalparks-java.html">Nationalparks Java 程序</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">4.8</button>
  <div class="version-menu">
    <a class="version is-current" href="nationalparks-java.html">4.8</a>
    <a class="version" href="../4.7/nationalparks-java.html">4.7</a>
    <a class="version" href="../4.6/nationalparks-java.html">4.6</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/wangmt2000/openshift-starter-guides/edit/ocp-4.8/documentation/modules/ROOT/pages/nationalparks-java.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Nationalparks Java App</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>在本节中，我们将部署一个用 Java 开发的后端服务，它将向可视化应用程序（parksmap在之前的实验中部署的 Web 组件）公开 2 个主要的 REST 端点。该应用程序将查询存储在 MongoDB 数据库中的国家公园信息（包括其坐标）。此应用程序还将提供一个外部访问点，以便最终用户可以直接使用所提供的 API。</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/roadshow-app-architecture-nationalparks-1.png" alt="Application architecture" width="800">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="source_to_image"><a class="anchor" href="#source_to_image"></a>Background: Source-to-Image (S2I)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在之前的实验中，我们学习了如何通过预先存在的镜像部署程序。现在，我们将扩展我们的知识，通过学习 OpenShift 如何使用现有存储库中的源代码构建容器镜像。这是使用 Source-to-Image 项目完成的。</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/openshift/source-to-image">Source-to-Image (S2I)</a> 是一个由 Red Hat 赞助的开源项目，其目标如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">Source-to-image (S2I) is a tool for building reproducible container images. S2I
produces ready-to-run images by injecting source code into a container image and
assembling a new container image which incorporates the builder image and built
source. The result is then ready to use with docker run. S2I supports
incremental builds which re-use previously downloaded dependencies, previously
built artifacts, etc.
源到图像（S2I）是一种用于构建可复制容器图像的工具。S2I通过将源代码注入容器映像和组装一个新的容器映像，其中包含生成器映像和构建来源然后，结果就可以与docker run一起使用了。S2I支持增量构建，并可复用下载的依赖项，制成品等。</code></pre>
</div>
</div>
<div class="paragraph">
<p>OpenShift 支持 S2I，并且可以使用 S2I 作为其构建机制之一（除了从 Dockerfile 构建容器映像和“自定义”构建）。</p>
</div>
<div class="paragraph">
<p>OpenShift runs the S2I process inside a special <strong>Pod</strong>, called a Build
Pod, and thus builds are subject to quotas, limits, resource scheduling, and
other aspects of OpenShift.
OpenShift 在称为 Build Pod的特殊Pod 中运行 S2I 进程，因此构建受配额、限制、资源调度和 OpenShift 其他方面的约束。</p>
</div>
<div class="paragraph">
<p>A full discussion of S2I is beyond the scope of this class, but you can find
more information about it either in the
<a href="https://docs.openshift.com/container-platform/4.8/creating_images/s2i.html">OpenShift S2I documentation</a>
or on <a href="https://github.com/openshift/source-to-image">GitHub</a>. The only key concept you need to
remember about S2I is that it&#8217;s magic.https://access.redhat.com/documentation/zh-cn/openshift_container_platform/4.8/html/building_applications/creating-applications-using-cli#_build-strategy-detection
S2I 的完整讨论超出了本课程的范围，但您可以在OpenShift S2I 文档 或GitHub 上找到有关它的更多信息 。关于 S2I，您需要记住的唯一关键概念是它很神奇。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>通过使用S2I，对开发者屏蔽了应用构建、部署的细节，如选用哪种操作系统、编写适应镜像操作系统的处理脚本、优化镜像大小等等，并且会产出 OCI 容器镜像，可以运行在任何兼容 OCI 镜像标准的集群中。类似的构建工具还有buildpacks等、实践中，有不少单位依然使用dockerfile。更多的工具可以访问https://landscape.cncf.io</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating_java_application"><a class="anchor" href="#creating_java_application"></a>练习: Creating a Java application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>作为本练习的一部分，我们将部署的后端服务称为 <code>nationalparks</code>. 这是一个 Java Spring Boot 应用程序，它对 MongoDB 数据库执行 2D 地理空间查询，以定位和返回世界上所有国家公园的地图坐标。这只是一种奇特的说法，即我们将部署一个返回 JSON 地点列表的 Web 服务。</p>
</div>
<div class="sect2">
<h3 id="add_to_project"><a class="anchor" href="#add_to_project"></a>Add to Project添加到项目</h3>
<div class="paragraph">
<p>Because the <code>nationalparks</code> component is a backend to serve data that our
existing frontend (parksmap) will consume, we are going to build it inside the existing
project that we have been working with. To illustrate how you can interact with OpenShift via the CLI or the web console, we will deploy the nationalparks component using the web console.
因为该 <code>nationalparks</code> 组件是为我们现有前端（parksmap）将使用的数据提供服务的后端，所以我们将在我们一直在使用的现有项目中构建它。为了说明如何通过 CLI 或 Web 控制台与 OpenShift 交互，我们将使用 Web 控制台部署 nationalparks 组件。</p>
</div>
</div>
<div class="sect2">
<h3 id="using_application_code_on_git_server"><a class="anchor" href="#using_application_code_on_git_server"></a>Using Application Code on Git Server在 Git 服务器上使用应用程序代码</h3>
<div class="paragraph">
<p>OpenShift 可以使用任何可访问的 Git 存储库。这可以是 GitHub、GitLab 或任何其他使用 Git 的服务器。您甚至可以在您的 Git 服务器中注册 webhook 以启动由应用程序代码的任何更新触发的 OpenShift 构建！</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/openshift-roadshow/nationalparks.git">NationalParks GitHub Repository</a></p>
</div>
<div class="paragraph">
<p>稍后在实验中，您将更改代码，然后重新构建您的应用程序。这是一个相当简单的 Spring 框架 Java 应用程序。</p>
</div>
</div>
<div class="sect2">
<h3 id="build_code_on_openshift"><a class="anchor" href="#build_code_on_openshift"></a>Build the Code on OpenShift在 OpenShift 上构建代码</h3>
<div class="paragraph">
<p>Similar to how we used <strong>+Add</strong> before with an existing image, we
can do the same for specifying a source code repository. Since for this lab you
have your own git repository, let&#8217;s use it with a simple Java S2I image.与我们之前对现有图像使用*+Add*的方式类似，我们可以对指定源代码存储库执行相同的操作。由于对于本实验，您有自己的 git 存储库，让我们将其与简单的 Java S2I 映像一起使用。</p>
</div>
<div class="paragraph">
<p>In the Developer Perspective, click <strong>+Add</strong> in the left navigation, go to the <strong>Git Repository</strong> section and then choose <strong>From Git</strong> option.在 Developer Perspective 中，单击左侧导航中的+Add，转到Git Repository部分，然后选择From Git选项。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/nationalparks-show-add-options.png" alt="Add to Project">
</div>
</div>
<div class="paragraph">
<p>The <strong>Import from Git</strong> workflow will guide you through the process of deploying your app based on a few selections.在从Git的导入工作流将引导您完成基于一些选择，在部署应用程序的过程。</p>
</div>
<div class="paragraph">
<p>为 Git Repo URL 输入以下内容：</p>
</div>
<div class="listingblock copypaste">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">https://github.com/openshift-roadshow/nationalparks.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>OpenShift will automatically guess the Git server type and the programming language used by the source code. Verify that <strong>Java</strong> has been selected as your Builder Image, and be sure to select version <strong>openjdk-11-ubi8</strong> to have OpenJDK 11.OpenShift 会自动猜测 Git 服务器类型和源代码使用的编程语言。验证是否已选择Java作为您的 Builder Image，并确保选择版本openjdk-11-ubi8以获得 OpenJDK 11。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/nationalparks-import-from-git-url-builder.png" alt="Import from Git">
</div>
</div>
<div class="paragraph">
<p>Scroll down to the <strong>General</strong> section. Select:向下滚动到常规部分。选择：</p>
</div>
<div class="paragraph">
<p><strong>Application Name</strong> :</p>
</div>
<div class="listingblock copypaste">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">workshop</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Name</strong> :</p>
</div>
<div class="listingblock copypaste">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">nationalparks</code></pre>
</div>
</div>
<div class="paragraph">
<p>In <strong>Resources</strong> section, select <strong>Deployment</strong>.在资源部分中，选择部署。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If present, leave Pipeline section empty here as we will implement it in the next modules如果存在，请在此处将 Pipeline 部分留空，因为我们将在下一个模块中实现它
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Under <strong>Advanced Options</strong>, ensure <strong>Create a route to the application</strong> is <strong>checked</strong> here.在高级选项，确保创建路线到应用程序被选中在这里。</p>
</div>
<div class="paragraph">
<p>We are going to create another <strong>Secure Route</strong>, this time directly from this view.我们将直接从这个视图创建另一个安全路由。</p>
</div>
<div class="paragraph">
<p>Click <strong>Show advanced Routing options</strong>. 单击显示高级路由选项。</p>
</div>
<div class="paragraph">
<p>Leave all default options, go under <strong>Security</strong> section.保留所有默认选项，进入安全部分。</p>
</div>
<div class="paragraph">
<p>Check <strong>Secure Route</strong> option.检查安全路由选项。</p>
</div>
<div class="paragraph">
<p>Under <strong>TLS termination</strong>, select <strong>Edge</strong>.在TLS 终止下，选择Edge。</p>
</div>
<div class="paragraph">
<p>Scroll down and expand the <strong>Labels</strong> section to add 3 labels.向下滚动并展开标签部分以添加 3 个标签。</p>
</div>
<div class="paragraph">
<p>The name of the Application group:应用组名称：</p>
</div>
<div class="listingblock copypaste">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">app=workshop</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next the name of this deployment.接下来是此部署的名称。</p>
</div>
<div class="listingblock copypaste">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">component=nationalparks</code></pre>
</div>
</div>
<div class="paragraph">
<p>And finally, the role this component plays in the overall application.最后，这个组件在整个应用程序中扮演的角色。</p>
</div>
<div class="listingblock copypaste">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">role=backend</code></pre>
</div>
</div>
<div class="paragraph">
<p>Click <strong>Create</strong> to submit.点击创建提交。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/nationalparks-configure-service1.png" alt="Select Builder">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/nationalparks-configure-service2.png" alt="Advanced Options">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/nationalparks-configure-service3.png" alt="Secure Route">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/nationalparks-configure-service4.png" alt="Label">
</div>
</div>
<div class="paragraph">
<p>To see the build logs, in Topology view, click the <code>nationalparks</code> entry, then click on <strong>View Logs</strong> in the <strong>Builds</strong> section of the <strong>Resources</strong> tab.要查看构建日志，请在拓扑视图中单击nationalparks条目，然后单击资源选项卡的构建部分中的查看日志。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/nationalparks-java-new-java-build.png" alt="Nationalparks build">
</div>
</div>
<div class="paragraph">
<p>This is a Java-based application that uses Maven as the build and dependency system.  For this reason, the initial build
will take a few minutes as Maven downloads all of the dependencies needed for
the application. You can see all of this happening in real time!这是一个基于 Java 的应用程序，它使用 Maven 作为构建和依赖系统。由于这个原因，初始构建将需要几分钟，因为 Maven 会下载应用程序所需的所有依赖项。您可以实时看到这一切的发生！</p>
</div>
<div class="paragraph">
<p>From the command line, you can also see the <strong>Builds</strong>:从命令行，您还可以看到Builds：</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get builds</code></pre>
</div>
</div>
<div class="paragraph">
<p>你会看到如下输出：</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME              TYPE      FROM          STATUS     STARTED              DURATION
nationalparks-1   Source    Git@b052ae6   Running    About a minute ago   1m2s</code></pre>
</div>
</div>
<div class="paragraph">
<p>您还可以使用以下命令查看构建日志：</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc logs -f builds/nationalparks-1</code></pre>
</div>
</div>
<div class="paragraph">
<p>构建完成并成功后：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The S2I process will push the resulting image to the internal OpenShift registry S2I 进程会将生成的图像推送到内部 OpenShift 注册表</p>
</li>
<li>
<p>The <strong>Deployment</strong> (D) will detect that the image has changed, and this
will cause a new deployment to happen.在部署（d）将检测到图像发生了变化，这将导致新部署的情况发生。</p>
</li>
<li>
<p>A <strong>ReplicaSet</strong> (RS) will be spawned for this new deployment.将为这个新部署生成一个ReplicaSet (RS)。</p>
</li>
<li>
<p>The RS will detect no <strong>Pods</strong> are running and will cause one to be deployed, as our default replica count is just 1.RS 将检测到没有Pod正在运行，并将导致部署一个，因为我们的默认副本数仅为 1。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the end, when issuing the <code>oc get pods</code> command, you will see that the build Pod
has finished (exited) and that an application <strong>Pod</strong> is in a ready and running state:最后，当发出oc get pods命令时，您会看到构建 Pod 已完成（退出），并且应用程序Pod处于就绪和运行状态：</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                    READY     STATUS      RESTARTS   AGE
nationalparks-1-tkid3   1/1       Running     3          2m
nationalparks-1-build   0/1       Completed   0          3m
parksmap-57df75c46d-xltcs        1/1       Running     0          2h</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you look again at the web console, you will notice that, when you create the
application this way, OpenShift also creates a <strong>Route</strong> for you. You can see the
URL in the web console, or via the command line:如果您再次查看 Web 控制台，您会注意到，当您以这种方式创建应用程序时，OpenShift 还会为您创建一个Route。您可以在 Web 控制台中或通过命令行查看 URL：</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get routes</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where you should see something like the following:您应该在哪里看到类似以下内容：</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME            HOST/PORT                                                   PATH      SERVICES        PORT       TERMINATION       WILDCARD
nationalparks   nationalparks-%PROJECT%.%CLUSTER_SUBDOMAIN%             nationalparks   8080-tcp        edge
parksmap        parksmap-%PROJECT%.%CLUSTER_SUBDOMAIN%                  parksmap        8080-tcp        edge        none</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, the URL is:在上面的示例中，URL 是：</p>
</div>
<div class="listingblock copypaste">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">https://nationalparks-%PROJECT%.%CLUSTER_SUBDOMAIN%</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since this is a backend application, it doesn&#8217;t actually have a web interface.
However, it can still be used with a browser. All backends that work with the parksmap
frontend are required to implement a <code>/ws/info/</code> endpoint. To test, visit this URL in your browser:由于这是一个后端应用程序，它实际上没有 Web 界面。但是，它仍然可以与浏览器一起使用。与 parksmap 前端一起工作的所有后端都需要实现 <code>/ws/info/</code> 端点。要进行测试，请在浏览器中访问此 URL：</p>
</div>
<div class="paragraph">
<p><a href="https://nationalparks-%PROJECT%.%CLUSTER_SUBDOMAIN%/ws/info/" class="params-link" target="_blank" rel="noopener">National Parks Info Page</a></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If the Pod is Running and the application is not available, please wait a few seconds and refresh the page, since we haven&#8217;t configured yet Health Checks for that.如果 Pod 正在运行并且应用程序不可用，请等待几秒钟并刷新页面，因为我们尚未为此配置健康检查。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You will see a simple JSON string:您将看到一个简单的 JSON 字符串：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"id":"nationalparks","displayName":"National Parks","center":{"latitude":"47.039304","longitude":"14.505178"},"zoom":4}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Earlier we said:之前我们说过：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">This is a Java Spring Boot application that performs 2D geo-spatial queries
against a MongoDB database</code></pre>
</div>
</div>
<div class="paragraph">
<p>But we don&#8217;t have a database. Yet.但是我们没有数据库。然而。</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="parksmap-rsh.html" class="query-params-link">连接到容器</a></span>
  <span class="next"><a href="nationalparks-java-databases.html" class="query-params-link">连接到数据库</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
