<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>扩展应用程序 :: OpenShift Starter Guides</title>
    <link rel="canonical" href="http://redhat-scholars.github.io/openshift-starter-guides/rhs-openshift-starter-guides/4.8/parksmap-scaling.html">
    <link rel="prev" href="parksmap-container-image.html">
    <link rel="next" href="parksmap-routes.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () { 
      const urlParams = new URLSearchParams(window.location.search);
      const clusterName = urlParams.get('CLUSTER_SUBDOMAIN');
      const projectName = urlParams.get('PROJECT');
      if (clusterName) {
        showCluster( clusterName );
      }
      else {
        showClusterForm();
      }

      if (projectName) {
        showProject( projectName );
      } else {
        showProjectForm();
      }
    } );


    function sliceCluster(clusterName){
      if (clusterName.length > 70) {
          return "..." + clusterName.slice(35);
      } else {
          return clusterName;
      }
    }

    function showCluster( clusterName ) {
      document.getElementById('navbar-form-empty').style.display = "none";
      document.getElementById('navbar-form-filled').style.display = "flex";
      document.getElementById('cluster_subdomain').textContent = sliceCluster(clusterName);
      document.getElementById('clusterfield2').value = clusterName;

    }

    function showClusterForm( clusterName ) {
      document.getElementById('navbar-form-empty').style.display = "flex";
      document.getElementById('navbar-form-filled').style.display = "none";
    }

    function gowithcluster() {
      elClusterInput = document.getElementById('clusterfield');
      elProjectInput = document.getElementById('projectfield2');

      window.location.search = ('&CLUSTER_SUBDOMAIN=' + elClusterInput.value + '&PROJECT=' + elProjectInput.value);
    }

    function showProject( projectName ) {
      document.getElementById('navbar-form-project-empty').style.display = "none";
      document.getElementById('navbar-form-project-filled').style.display = "flex";
      document.getElementById('project').textContent = projectName;
      document.getElementById('projectfield2').value = projectName;
    }

    function showProjectForm( projectName ) {
      document.getElementById('navbar-form-project-empty').style.display = "flex";
      document.getElementById('navbar-form-project-filled').style.display = "none";
    }

    function gowithproject() {
      elProjectInput = document.getElementById('projectfield');
      elClusterInput = document.getElementById('clusterfield2');
      window.location.search = ('&CLUSTER_SUBDOMAIN=' + elClusterInput.value + '&PROJECT=' + elProjectInput.value);
    }

  </script>
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="http://redhat-scholars.github.io/openshift-starter-guides">OpenShift Starter Guides</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item" id="navbar-form-empty">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i style="color: orange;"
              class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>

          <form action="javascript:void(0);" onsubmit="gowithcluster();">
            <input size="40" id="clusterfield" type="text" placeholder="Enter Cluster Subdomain">
            <input type="hidden" id="projectfield2" name="projectfield2" value="">
          </form>
        </div>

        <div class="navbar-item" id="navbar-form-filled" style="display: none;">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
          <span class="navbar-text" id="cluster_subdomain"></span>
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
        </div>

         <div class="navbar-item" id="navbar-form-project-empty">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i style="color: orange;"
              class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>

          <form action="javascript:void(0);" onsubmit="gowithproject();">
            <input size="40" id="projectfield" type="text" placeholder="Enter Project Name">
            <input type="hidden" id="clusterfield2" name="clusterfield2" value="">
          </form>
        </div>

        <div class="navbar-item" id="navbar-form-project-filled" style="display: none;">
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">|</span>
          <span class="navbar-text" id="project"></span>
          <span class="navbar-text" style="margin-left: 1rem; margin-right: 1rem;">&nbsp;<i onclick="recycle();" style="color: green;" class="fa fa-recycle" aria-hidden="true"></i></span>
        </div>

        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-scholars.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="rhs-openshift-starter-guides" data-version="4.8">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">OpenShift Starter Guides</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-workshop-summary.html">实验总览</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="prerequisites.html">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-environment.html">OpenShift 架构</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-explore.html">配置实验环境&amp;探索 OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-explore.html#the_web_console">配置实验环境&amp;Web控制台</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-explore.html#command_line_interface">Command Line Interface 命令行控制台</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="common-explore.html#download_openshift_cli">Download OpenShift CLI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-explore.html#connect_to_the_cluster_with_cli">从 CLI 连接到 OpenShift 实验环境</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="common-explore.html#working_with_proxies">Working with proxies</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="projects.html">Projects项目</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="projects.html#create_your_first_project">创建您的第一个项目</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-parksmap-architecture.html">示例程序 Parksmap 架构</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="parksmap-container-image.html">部署示例程序 Parksmap </a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-container-image.html#deploy_your_first_image">练习: 部署您的第一个镜像</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-container-image.html#containers_and_pods">背景：容器和 Pod （Containers and Pods）</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-container-image.html#examining_the_pod">练习: 查看POD信息</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-container-image.html#customizing_image_lifecycle_behavior">背景: 自定义镜像生命周期行为</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-container-image.html#services">背景: 服务 Services</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="parksmap-scaling.html">Scaling Apps缩放应用程序</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#deployments_and_replicasets">背景: 部署 Deployments 和 复制集 ReplicaSets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exploring_deployment_related_objects">练习：探索与部署相关的对象</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#scaling_the_application">练习：扩展应用程序</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#application_self_healing">应用程序“自愈 Self Healing"</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#scale_down">app缩小副本</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="parksmap-routes.html">Routes （路由）</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-routes.html#routes">背景：Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-routes.html#creating_a_route">练习：创建路由</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="parksmap-logging.html">日志</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-logging.html#container_logs">背景：容器日志</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-logging.html#examining_logs">练习：探索日志</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="parksmap-permissions.html">权限</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-permissions.html#grant_serviceaccount_view_permissions">练习：授予服务帐户查看权限</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-permissions.html#redeploy_application">练习：重新部署应用程序</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="parksmap-rsh.html">连接到容器</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-rsh.html#remote_shell_session_to_container_using_cli">练习：使用 CLI 与容器进行远程 Shell 会话</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-rsh.html#execute_command_in_container">练习：使用 Web 控制台与容器进行远程 Shell 会话</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="parksmap-rsh.html#remote_shell_session_to_container_using_webconsole">练习：在容器中执行命令</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java.html">Nationalparks Java 程序</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java.html#source_to_image">背景: 代码到镜像 Source-to-Image (S2I)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java.html#creating_java_application">练习：创建  Java 应用程序</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="nationalparks-java.html#add_to_project">添加到项目</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="nationalparks-java.html#using_application_code_on_git_server">在 Git 服务器上使用应用程序代码</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="nationalparks-java.html#build_code_on_openshift">在 OpenShift 上构建代码</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java-databases.html">连接到数据库</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#storage">背景：存储Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#templates">背景：模板 Templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#create_mongodb_template">练习：创建 MongoDB 模板</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#deploy_mongodb">练习：部署 MongoDB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#exploring_openshift_magic">练习: Exploring OpenShift Magic</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#data_data_everywhere">练习: Data, Data, Everywhere</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-databases.html#working_with_labels">练习：使用标签</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-application-health.html">应用健康检查</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-application-health.html#add_health_checks">练习：添加健康检查</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java-codechanges-github.html">Webhooks with OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github.html#prerequisite_github_account">Prerequisite: GitHub Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github.html#webhooks">Webhooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github.html#webhooks_with_openshift">Webhooks with OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github.html#configuring_github_webhooks">Exercise: Configuring GitHub Web Hooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github.html#using_github_webhooks">Exercise: Using GitHub Web Hooks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java-codechanges-github-actions.html">GitHub Actions with OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github-actions.html#disable_github_webhook">Disable GitHub Webhook</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github-actions.html#disable_openshift_triggers">Disable OpenShift Triggers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github-actions.html#configure_github_action">Configure GitHub Action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github-actions.html#add_github_action">Add GitHub Action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-codechanges-github-actions.html#enable_openshift_triggers">Enable OpenShift Triggers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java-pipeline.html">Continuous Integration and Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline.html#install_openshift_pipelines_from_operatorhub">Install OpenShift Pipelines from OperatorHub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline.html#understanding_tekton">Understanding Tekton</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline.html#create_your_pipeline">Create Your Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline.html#run_the_pipeline">Run the Pipeline</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="nationalparks-java-pipeline-codechanges-github.html">Webhooks with Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline-codechanges-github.html#prerequisite_github_account">Prerequisite: GitHub Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline-codechanges-github.html#webhooks">Web Hooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline-codechanges-github.html#adding_triggers_to_your_pipeline">Adding Triggers to your Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline-codechanges-github.html#configuring_github_webhooks">Exercise: Configuring GitHub Web Hooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nationalparks-java-pipeline-codechanges-github.html#using_github_webhooks">Exercise: Using GitHub Web Hooks</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="mlbparks-templates.html">MLBParks App</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-templates.html#instantiate_template">Exercise: Instantiate a Template</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="mlbparks-binary-build.html">Binary Builds</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-binary-build.html#moving_on_from_s2i">Moving on From S2I</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-binary-build.html#fast_iterative_code_change_using_binary_deploy">Fast Iterative Code Change Using Binary Deploy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="mlbparks-binary-build.html#using_binary_deployment">Exercise: Using Binary Deployment</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mlbparks-binary-build.html#clone_source">Clone source</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mlbparks-binary-build.html#setup_the_build_of_the_war_file">Setup the Build of the WAR file</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mlbparks-binary-build.html#clone_change">Clone change</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mlbparks-binary-build.html#doing_the_binary_build">Doing the Binary Build</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="mlbparks-debugging.html">Debugging Apps</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-debugging.html#port_forwading_and_debugging">Background: Port Forwarding and Debugging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-debugging.html#enabling_debugging_in_eap_on_openshift">Exercise: Enabling Debugging in EAP on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-debugging.html#port-forwarding_from_svc_to_our_local_machine">Exercise: Port-Forwarding from a Service to our local machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-debugging.html#setting_up_remote_debugging">Attaching a Remote Debugger</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mlbparks-debugging.html#port-forwarding_from_pod_to_our_local_machine">Exercise: Port-Forwarding from the pod to our local machine</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="common-further-resources.html">Further Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="common-workshop-links.html">Workshop Links</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#openshift_cluster_url">OpenShift Cluster URL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#workshop_guides">Workshop Guides</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#web_terminal">Web terminal</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common-workshop-links.html#git_server">Git Server</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenShift Starter Guides</span>
    <span class="version">4.8</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">OpenShift Starter Guides</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">4.8</a>
        </li>
        <li class="version">
          <a href="../4.7/index.html">4.7</a>
        </li>
        <li class="version">
          <a href="../4.6/index.html">4.6</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OpenShift Starter Guides</a></li>
    <li><a href="parksmap-scaling.html">Scaling Apps缩放应用程序</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">4.8</button>
  <div class="version-menu">
    <a class="version is-current" href="parksmap-scaling.html">4.8</a>
    <a class="version" href="../4.7/parksmap-scaling.html">4.7</a>
    <a class="version" href="../4.6/parksmap-scaling.html">4.6</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/wangmt2000/openshift-starter-guides/edit/ocp-4.8/documentation/modules/ROOT/pages/parksmap-scaling.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">扩展应用程序</h1>
<div class="sect1">
<h2 id="deployments_and_replication_controllers"><a class="anchor" href="#deployments_and_replication_controllers"></a>背景：部署 Deployments 和复制集 ReplicaSets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>虽然服务为 Pod 提供路由和负载平衡（这些 Pod 可能会存在或不存在），但 ReplicaSet （RS） 和 ReplicationController （RC） 用于指定并确保存在所需数量的 Pod（副本）
例如，如果你总是希望你的应用程序服务器缩放到3个Pod（实例）, 一个 ReplicaSet是必须的，没有ReplicaSet的话，Pod被kill或者die，意外退出，openshift是不会自动重新启动Pod的。ReplicaSets和ReplicationController是 OpenShift“自我修复self heals”的基础， Deployments control，ReplicaSets、ReplicationController是由DeploymentConfigs控制的</p>
</div>
<div class="paragraph">
<p>来自openshift <a href="https://docs.openshift.com/container-platform/4.8/applications/deployments/what-deployments-are.html">deployments 文档</a>，<a href="https://access.redhat.com/documentation/zh-cn/openshift_container_platform/4.8/html/building_applications/_deployments#deployments-repliasets_what-deployments-are">中文在这里</a></p>
</div>
<div class="quoteblock">
<blockquote>
<em>
与复制控制器类似, ReplicaSet 是一个原生 Kubernetes API 对象，可以确保在任意给定时间运行指定数量的 pod 副本。副本集与复制控制器之间的区别在于，副本集支持基于集合的选择器要求，而复制控制器只支持基于相等的选择器要求。
</em>
</blockquote>
</div>
<div class="paragraph">
<p>在 Kubernetes 中，部署*Deployment* (D) 定义了应该如何部署某些东西。在几乎所有情况下，您最终都会一起使用Pod、Service、 ReplicaSet和Deployment资源。而且，在几乎所有这些情况下，OpenShift 都会为您创建所有这些。</p>
</div>
<div class="paragraph">
<p>在某些边缘情况下，您可能需要一些Pod和一个没有Deployment或Service的ReplicaSet，您可以在实验结束后随时联系红帽咨询。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exploring_deployment_related_objects"><a class="anchor" href="#exploring_deployment_related_objects"></a>练习：探索与部署相关的对象</h2>
<div class="sectionbody">
<div class="paragraph">
<p>现在我们知道了ReplicaSet和 Deployment的背景知识，我们可以探索它们是如何工作的以及它们之间的关系。让我们看一下您让Openshift根据您的要求，使用parksmap镜像为您运行程序时，OpenShift为您创建的部署deployment --parksmap：</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get deployment</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME       READY   UP-TO-DATE   AVAILABLE   AGE
parksmap   1/1     1            1           20m</code></pre>
</div>
</div>
<div class="paragraph">
<p>要获得更多详细信息，我们可以查看 <strong>ReplicaSet</strong> (<strong>RS</strong>).</p>
</div>
<div class="paragraph">
<p>看一下我们之前部署`parksmap` 镜像时，Openshift创建的 <strong>ReplicaSet</strong> (RS)</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get rs</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                  DESIRED   CURRENT   READY   AGE
parksmap-65c4f8b676   1         1         1       21m</code></pre>
</div>
</div>
<div class="paragraph">
<p>这让我们知道，现在我们期望部署一个Pod ( Desired)，而我们实际部署了一个Pod ( Current)。通过更改所需的数量，我们可以告诉 OpenShift 我们想要更多或更少的Pods。</p>
</div>
<div class="paragraph">
<p>OpenShift 的Horizo​​ntalPodAutoscaler有效地监控一组实例的 CPU 使用率，然后相应地操纵 RC。</p>
</div>
<div class="paragraph">
<p>您可以在此处了解有关基于 CPU 的
<a href="https://docs.openshift.com/container-platform/4.8/nodes/pods/nodes-pods-autoscaling.html#nodes-pods-autoscaling-about_nodes-pods-autoscaling">Horizontal Pod Autoscaler</a>的更多信息</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scaling_the_application"><a class="anchor" href="#scaling_the_application"></a>练习：扩展应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>让我们将我们的 parkmap“应用程序”扩展到 2 个实例。我们可以使用scale命令来做到这一点。您也可以通过增加 OpenShift Web 控制台中的 Desired Count 来完成此操作。选择其中一种方法；由您决定。</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc scale --replicas=2 deployment/parksmap</code></pre>
</div>
</div>
<div class="paragraph">
<p>您还可以在Developer Perspective 中最多扩展两个 Pod 。在拓扑视图中，首先单击parksmap部署配置并选择详细信息选项卡：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/parksmap-details.png" alt="Details">
</div>
</div>
<div class="paragraph">
<p>接下来，单击Pod 可视化旁边的 <strong>^</strong> 图标以扩展到 2 个 Pod</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/parksmap-scaleup.png" alt="Scaling Up">
</div>
</div>
<div class="paragraph">
<p>要验证我们是否更改了副本数，请输入以下命令</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get rs</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                  DESIRED   CURRENT   READY   AGE
parksmap-65c4f8b676   2         2         2       23m</code></pre>
</div>
</div>
<div class="paragraph">
<p>您可以看到我们现在有 2 个副本。让我们使用以下oc get pods命令验证 Pod 的数量：</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                        READY   STATUS    RESTARTS   AGE
parksmap-65c4f8b676-fxcrq   1/1     Running   0          92s
parksmap-65c4f8b676-k5gkk   1/1     Running   0          24m</code></pre>
</div>
</div>
<div class="paragraph">
<p>最后，让我们验证我们在 <strong>上一个实验</strong> 中了解到的Service是否准确反映了两个端点endpoint：</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc describe svc parksmap</code></pre>
</div>
</div>
<div class="paragraph">
<p>您将看到类似于以下输出的内容：</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">Name:              parksmap
Namespace:         user1
Labels:            app=workshop
                   app.kubernetes.io/component=parksmap
                   app.kubernetes.io/instance=parksmap
                   app.kubernetes.io/part-of=workshop
                   component=parksmap
                   role=frontend
Annotations:       openshift.io/generated-by: OpenShiftWebConsole
Selector:          app=parksmap,deploymentconfig=parksmap
Type:              ClusterIP
IP:                172.30.22.209
Port:              8080-tcp  8080/TCP
TargetPort:        8080/TCP
Endpoints:         10.128.2.90:8080,10.131.0.40:8080
Session Affinity:  None
Events:            &lt;none&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>查看Service端点的另一种方法是使用以下方法：</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get endpoints parksmap</code></pre>
</div>
</div>
<div class="paragraph">
<p>你会看到如下内容：</p>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME       ENDPOINTS                           AGE
parksmap   10.128.2.90:8080,10.131.0.40:8080   45m</code></pre>
</div>
</div>
<div class="paragraph">
<p>您的 IP 地址可能会有所不同，因为每个 pod 在 OpenShift 环境中都会收到一个唯一的 IP。<strong>端点列表是查看服务背后有多少 Pod 的快速方法</strong> 。</p>
</div>
<div class="paragraph">
<p>您还可以在 Developer Perspective 中看到两个Pod都在运行：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/parksmap-scaled.png" alt="Scaled">
</div>
</div>
<div class="paragraph">
<p>总的来说，在service中伸缩pod是非常简单的。应用程序扩展可以非常快地发生，因为 OpenShift 只是启动现有镜像的新实例，特别是如果该图像已经缓存在节点上</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="application_self_healing"><a class="anchor" href="#application_self_healing"></a>Application "Self Healing"</h2>
<div class="sectionbody">
<div class="paragraph">
<p>由于 OpenShift 的RS会不断监控以查看实际运行的Pod数量是否达到预期，因此您可能还期望 OpenShift 会在出现问题时“修复fix”这种情况，的确如此。</p>
</div>
<div class="paragraph">
<p>由于我们现在有两个Pod正在运行，让我们看看如果我们“意外”杀死一个会发生什么。oc get pods再次运行该命令，并选择一个Pod 名称。然后，执行以下操作：</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc delete pod parksmap-65c4f8b676-k5gkk &amp;&amp; oc get pods</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pod "parksmap-65c4f8b676-k5gkk" deleted
NAME                        READY   STATUS    RESTARTS   AGE
parksmap-65c4f8b676-bjz5g   1/1     Running   0          13s
parksmap-65c4f8b676-fxcrq   1/1     Running   0          4m48s</code></pre>
</div>
</div>
<div class="paragraph">
<p>你注意到什么了吗？一个容器已被删除，并且已经创建了一个新容器。</p>
</div>
<div class="paragraph">
<p>此外，Pod的名称也略有更改。这是因为 OpenShift 几乎立即检测到当前状态 (1 Pod ) 与所需状态 (2 Pods )不匹配，并通过调度另一个Pod来修复它。</p>
</div>
<div class="paragraph">
<p>此外，OpenShift 提供了有关检查应用程序实例的活跃度和/或准备情况的基本功能。如果基本检查不足，OpenShift 还允许您在容器内运行命令以执行检查。该命令可以是使用任何已安装语言的复杂脚本。</p>
</div>
<div class="paragraph">
<p>基于这些健康检查，如果 OpenShift 确定我们的parksmap 应用程序实例不活跃，它会杀死该实例然后重新启动它，始终确保所需数量的副本到位。</p>
</div>
<div class="paragraph">
<p>有关探测应用程序的更多信息，请参见文档的
<a href="https://docs.openshift.com/container-platform/4.8/applications/application-health.html"> 应用程序运行状态健康 Application
Health</a> 小节以及本指南的后面部分</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scale_down"><a class="anchor" href="#scale_down"></a>练习：缩小 Scale Down</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在我们继续之前，请继续将您的应用程序缩小到单个实例。随意使用您喜欢的任何方法来执行此操作。</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
不要忘记将parksmap组件缩小到 1 个实例，否则在以后的实验中您可能会遇到一些奇怪的行为。这是由于应用程序的编码方式而不是 OpenShift 本身。
</td>
</tr>
</table>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="parksmap-container-image.html" class="query-params-link">部署示例程序 Parksmap </a></span>
  <span class="next"><a href="parksmap-routes.html" class="query-params-link">Routes （路由）</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
